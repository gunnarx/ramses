<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RAMSES Documentation: RAMSES Test strategy</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ramses_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RAMSES Documentation
   &#160;<span id="projectnumber">25.0.1</span>
   </div>
   <div id="projectbrief">Information for RAMSES users and developers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">RAMSES Test strategy </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Introduction</h1>
<p>The main focus of this document is not to provide extensive theory on testing, but rather to suggest a mentality for our testing activities and to provide some helpful guides.</p>
<h2>Primary goals</h2>
<p>What do we want to achieve with the time we invest into tests:</p>
<ul>
<li>Catch errors as fast as possible</li>
<li>Catch problems in all different issue categories</li>
<li>Create understanding and transparency, which code has passed which quality gate. In order to achieve this we must also</li>
<li>Value good and maintainable test code</li>
<li>Provide structures that reduce time and obstacles to add new tests</li>
</ul>
<h2>General principles for testing</h2>
<p>Principles that we should follow in our test activities result resulting from the primary goals:</p>
<ul>
<li>Test as "small as possible" i.e. fail fast</li>
<li>view test code as part of code base -&gt; same quality concerning reusablility, robustness, readability etc.</li>
<li>do not forget error cases when testing, they are at least as important</li>
<li>must be automated</li>
</ul>
<p>From the "test as small as possible" principle it follows that a feature should always be tested on the smallest possible level. If e.g. the code around is organized in a layered fashion the test should if possible only test one layer and the adjacent layer should be covered by separate tests. Other kinds of tests that test a user feature in a broader scope should only be used as <b>additional</b> security mechanism to ensure that the components work correctly together or to prove that a user feature works from end to end.</p>
<h1>Types of errors</h1>
<p>Since the goals are distributed in very different areas of the development process, there's not one magic kind of test that will detect all of the possible issues. A multi-stage strategy for error detection and handling must be defined to effectively handle the possible error scenarios.</p>
<p>This section lists the different types of possible error scenarios and lists which measures we use to reduce the risk of running into these problems. The types of tests mentioned in these measures are further explained in the next section.</p>
<h2>Platform issues</h2>
<p>Description: platforms behave differently; underlying library or driver was updated, now errors occur.</p>
<p>Measures:</p><ul>
<li>Build every patch before mainline</li>
<li>Run all unit tests (including sandwich tests) on all targets nightly</li>
<li>Run renderer tests on all targets nightly</li>
</ul>
<h2>Code Issues</h2>
<p>Description: errors in implementation</p>
<p>Measures:</p><ul>
<li>Build/Run unit tests every patch before mainline</li>
<li>static checking tools nightly for example coverity/teamscale (*todo)</li>
<li>dynamic checking tools nightly for example valgrind/sanitizers</li>
</ul>
<h2>Complex Code Issues</h2>
<p>Description: e.g. race conditions, dead-locks, use-after-free, memory leaks</p>
<p>Measures:</p><ul>
<li>static &amp; dynamic checking tools nightly for example coverity/teamscale/valgrind/sanitizers</li>
</ul>
<h2>Runtime Issues</h2>
<p>Description: all kinds of possible runtime behavior</p>
<p>Measures:</p><ul>
<li>real world stress tests</li>
<li>top level smoke tests run nightly on all targets</li>
</ul>
<h2>Performance Issues</h2>
<p>Description: Performance drops unnoticed / in certain cases</p>
<p>Measures:</p><ul>
<li>performance tests in critical areas (renderloop, scene loading, scene transfer, latency) (*todo)</li>
</ul>
<h2>Integration Issues</h2>
<p>Description: wrong usage of RAMSES in other applications</p>
<p>Measures:</p><ul>
<li>Continuous delivery enables early customer integration and testing</li>
<li>Provide example applications showing usage</li>
<li>Customer documentation</li>
</ul>
<h2>Customer Feature Tests</h2>
<p>Description: Customer feature exposes unexpected behavior, graphic artefacts, wrong content, ...</p>
<p>Measures:</p><ul>
<li>Top level smoke tests run nightly on all targets</li>
</ul>
<h2>Requirement/Specification Issues</h2>
<p>Description: Requirements change during development, are understood wrong or are missing</p>
<p>Measures:</p><ul>
<li>Agile development allows change of requirements every sprint. Customer can review at early product stage.</li>
</ul>
<h1>Types of tests</h1>
<h2>Unit test</h2>
<ul>
<li>per class</li>
<li>google test based</li>
</ul>
<p>ideally executed:</p><ul>
<li>per patch on build server for selected platforms</li>
<li>nightly for all platforms</li>
</ul>
<h2>Sandwich test</h2>
<ul>
<li>on component level or crossing multiple layers</li>
<li>google test based</li>
</ul>
<p>ideally executed:</p><ul>
<li>per patch on build server for selected platforms</li>
<li>nightly for all platforms</li>
</ul>
<h2>Rendering test</h2>
<ul>
<li>sandwich test that executes all steps from scene to rendering of a pixel</li>
<li>custom test framework</li>
</ul>
<p>ideally executed:</p><ul>
<li>with software renderer per patch on build server</li>
<li>nightly for all platforms</li>
</ul>
<h2>Top level smoke test</h2>
<ul>
<li>tests end-to-end executing a top-level Ramses feature</li>
<li>test with binary deployment, real network communication</li>
<li>custom python-based test framework</li>
</ul>
<p>ideally executed:</p><ul>
<li>nightly for all platforms</li>
</ul>
<h2>Stress test</h2>
<ul>
<li>sandwich or smoke test under extreme load</li>
<li>python-based test framework</li>
</ul>
<p>ideally executed:</p><ul>
<li>per patch on build server for selected platforms</li>
<li>nightly for all platforms</li>
</ul>
<h2>Performance test</h2>
<ul>
<li>tests performance-critical parts of Ramses</li>
<li>TODO</li>
</ul>
<p>ideally executed:</p><ul>
<li>per patch on build server for selected platforms</li>
<li>nightly for all platforms</li>
</ul>
<h1>Guide: which kind of test(s) should be used for a patch</h1>
<div class="image">
<img src="guide-which-tests.png" alt="guide-which-tests.png"/>
<div class="caption">
Guide: which kind of test(s) should be used for a patch</div></div>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
